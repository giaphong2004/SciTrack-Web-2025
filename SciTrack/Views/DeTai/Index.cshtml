@model List<SciTrack.web.Models.DeTai>
@{
    ViewData["Title"] = "Đề tài KHCN";
    var selected = ViewBag.Selected as SciTrack.web.Models.DeTai;

}
@{
    Layout = "_Layout";
}


<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>@ViewData["Title"]</title>
    <!-- ✅ CSS tùy chỉnh của bạn — ĐẶT DÒNG NÀY Ở CUỐI HEAD -->
      
        <link href="~/css/site.css" rel="stylesheet" />
</head>
    <main class="main-content">
<body>
    <div class="flex-fill p-4">
        <h5 class="fw-bold text-primary">Phần mềm quản lý KHCN — Quản lý Đề tài</h5>
        <h6 class="fw-bold mb-3">DTKHCN - Đề tài KHCN ̣chi tiết)</h6>
        @if (TempData["Message"] != null)
        {
            <div class="alert alert-info mt-2">@TempData["Message"]</div>
        }

        <div class="card shadow-sm border-0 rounded-3 mt-3">
            <div class="card-body">
                <div class="row">
                    <!-- 🟩 FORM BÊN TRÁI -->
                    <div class="col-md-7">
                        <form method="post">
                            <div class="mb-2">
                                <label class="form-label fw-semibold">Mã số đề tài (ID2.1)</label>
                                <input type="text" name="MaDeTai" class="form-control" value="@(selected?.MaDeTai ?? "")" required />
                            </div>

                            <div class="mb-2">
                                <label class="form-label fw-semibold">Tên đề tài (ID2.2)</label>
                                <input type="text" name="Ten" class="form-control" value="@(selected?.Ten ?? "")" required />
                            </div>

                            <div class="mb-2">
                                <label class="form-label fw-semibold">Ngày cập nhật (ID2.3)</label>
                                <input type="date" name="CapNhatTaiSanLanCuoi" class="form-control"
                                       value="@(selected?.CapNhatTaiSanLanCuoi?.ToString("yyyy-MM-dd") ?? "")" />
                            </div>

                            <div class="mb-2">
                                <label class="form-label fw-semibold">Các quyết định liên quan (ID2.4)</label>
                                <textarea name="QuyetDinhThamChieu" class="form-control" rows="2">@(selected?.QuyetDinhThamChieu ?? "")</textarea>
                            </div>

                            <div class="mb-2">
                                <label class="form-label fw-semibold">Quyết định xử lý tài sản (ID2.5)</label>
                                <textarea name="QuyetDinhXuLyTaiSan" class="form-control" rows="2">@(selected?.QuyetDinhXuLyTaiSan ?? "")</textarea>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-2">
                                    <label class="form-label fw-semibold">Kinh phí thực hiện (ID2.6)</label>
                                    <input type="number" name="KinhPhiThucHien" class="form-control" value="@(selected?.KinhPhiThucHien ?? 0)" />
                                </div>
                                <div class="col-md-6 mb-2">
                                    <label class="form-label fw-semibold">Kinh phí đào tạo (ID2.7)</label>
                                    <input type="number" name="KinhPhiDaoTao" class="form-control" value="@(selected?.KinhPhiDaoTao ?? 0)" />
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-2">
                                    <label class="form-label fw-semibold">Kinh phí tiêu hao (ID2.8)</label>
                                    <input type="number" name="KinhPhiTieuHao" class="form-control" value="@(selected?.KinhPhiTieuHao ?? 0)" />
                                </div>
                                <div class="col-md-6 mb-2">
                                    <label class="form-label fw-semibold">Khấu hao thiết bị (ID2.9)</label>
                                    <input type="number" name="KhauHaoThietBi" class="form-control" value="@(selected?.KhauHaoThietBi ?? 0)" />
                                </div>
                            </div>

                            <div class="mb-3">
                                <label class="form-label fw-semibold">Kết quả đề tài (ID2.10)</label>
                                <input type="text" name="KetQuaDeTai" class="form-control" value="@(selected?.KetQuaDeTai ?? "")" />
                            </div>

                            <!-- 🟣 CÁC NÚT -->
                            <div class="mt-3 d-flex gap-2">
                                <button type="submit" formaction="/DeTai/Create" class="btn btn-success">
                                    <i class="bi bi-plus-circle"></i> Thêm
                                </button>

                                <button type="submit" formaction="/DeTai/Update" class="btn btn-warning text-white">
                                    <i class="bi bi-pencil-square"></i> Sửa
                                </button>

                                <button type="submit" formaction="/DeTai/Delete" class="btn btn-danger">
                                    <i class="bi bi-trash"></i> Xóa
                                </button>

                                <a class="btn btn-secondary">
                                    <i class="bi bi-printer"></i> In
                                </a>
                                    <a href="/DeTai/Index" class="btn btn-secondary">
                                        <i class="bi bi-x-circle"></i> Đóng
                                    </a>
                            </div>
                        </form>
                    </div>

                    <!-- 🟦 DANH SÁCH BÊN PHẢI -->
                    <div class="col-md-5">
                        <h6 class="fw-bold mb-3">Danh sách đề tài KHCN</h6>
                        <div class="table-responsive">
                            <table class="table table-hover table-bordered align-middle">
                                <thead class="table-light">
                                    <tr>
                                        <th style="width:10%">Mã</th>
                                        <th style="width:60%">Tên đề tài</th>
                                        <th style="width:30%">Kinh phí</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var dt in Model)
                                    {
                                        <tr>
                                            <td colspan="3">
                                                <a asp-controller="DeTai" asp-action="Index" asp-route-maDeTai="@dt.MaDeTai"
                                                   class="detai-link w-100 d-block text-start text-decoration-none p-2">
                                                    <div class="row">
                                                        <div class="col-2 ma-detai">@dt.MaDeTai</div>
                                                        <div class="col-7 ten-detai">@dt.Ten</div>
                                                        <div class="col-3 text-end kinhphi">@String.Format("{0:N0}", dt.KinhPhiThucHien)</div>
                                                    </div>
                                                </a>
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                        <small class="text-muted">Nhấn vào hàng để chỉnh sửa / in / xóa</small>
                    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
</main>
